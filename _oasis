Name: CoPylot
Version: 0.1
Synopsis: A demand-driven program analysis for a subset of Python.
Authors: Zachary Palmer, Tianlu Chen, Devon Loehr
License: Apache

Description: A demand-driven program analysis for a subset of Python.
Homepage: http://github.com/JHU-PL-Lab/CoPylot

OASISFormat: 0.4
BuildTools: ocamlbuild
Plugins: META (0.4)
AlphaFeatures: ocamlbuild_more_args
XOCamlbuildExtraArgs: -use-menhir -use-ocamlfind
BuildDepends: threads

# The following allows individual developers to customize their environments
# (e.g. reposition the _build directory via a symlink) on build.
PreBuildCommand: ./.execute_if_exists ./.local_prebuild
PreCleanCommand: ./.execute_if_exists ./.local_preclean

Library "CoPylot"
  Path: src
  Modules:
    Copylot

Library "utils"
  FindlibParent: CoPylot
  Path: src/utils
  Modules:
    Graph
  BuildDepends:
    batteries,
    jhupllib,
    ppx_deriving.std

Library "parser"
  FindlibParent: CoPylot
  Path: src/parser
  Modules:
    Python2_ast,
    Python2_generated_lexer_state,
    Python2_generated_lexer,
    Python2_generated_parser,
    Python2_parser,
    Python2_parser_utils,
    Python2_pretty
  BuildDepends:
    batteries,
    jhupllib,
    ppx_deriving.std

Library "ast_simplification"
  FindlibParent: CoPylot
  Path: src/ast_simplification
  Modules:
    Python2_ast_types,
    Python2_concrete_ast,
    Python2_ast_generalizer,
    Python2_rename_ast,
    Python2_simplified_ast,
    Python2_ast_simplifier,
    Python2_normalized_ast,
    Python2_ast_normalizer,
    Python2_abstract_ast,
    Python2_ast_lifter,
    Python2_uid_stmt_map,
    Python2_normalized_ast_pretty,
    Python2_abstract_ast_pretty,
    Python2_ast_pipeline
  BuildDepends:
    batteries,
    jhupllib,
    ppx_deriving.std,
    ppx_deriving_yojson,
    CoPylot.parser

Library "analysis"
  FindlibParent: CoPylot
  Path: src/analysis
  Modules:
    Python2_cfg,
    Python2_pds,
    Python2_analysis,
    Python2_control_rules,
    Python2_pds_edge_functions,
    Python2_analysis_result_structure
  BuildDepends:
    batteries,
    jhupllib,
    ppx_deriving.std,
    ppx_deriving_yojson,
    pds-reachability,
    CoPylot.parser,
    CoPylot.ast_simplification,
    CoPylot.utils

Library "pyssembly_parser"
  FindlibParent: CoPylot
  Path: src/pyssembly_parser
  Modules:
    Python2_pys_generated_lexer,
    Python2_pys_generated_parser,
    Python2_pys_parser,
    Python2_abs_generated_lexer,
    Python2_abs_generated_parser,
    Python2_abs_parser
  BuildDepends:
    batteries,
    jhupllib,
    ppx_deriving.std,
    ppx_deriving_yojson,
    pds-reachability,
    CoPylot.ast_simplification,
    CoPylot.utils

Library "pyssembly_interpreter"
  FindlibParent: CoPylot
  Path: src/pyssembly_interpreter
  Modules:
    Python2_pys_interpreter_types,
    Python2_pys_interpreter_builtin_objects,
    Python2_pys_interpreter_builtin_defs,
    Python2_pys_interpreter_init,
    Python2_pys_interpreter_utils,
    Python2_pys_interpreter
  BuildDepends:
    batteries,
    jhupllib,
    ppx_deriving.std,
    ppx_deriving_yojson,
    pds-reachability,
    CoPylot.ast_simplification

Executable "test"
  Path: test/
  MainIs: test.ml
  CompiledObject: byte
  BuildDepends:
    batteries,
    jhupllib,
    ocaml-monadic,
    oUnit,
    pds-reachability,
    ppx_deriving.std,
    CoPylot.parser,
    CoPylot.ast_simplification,
    CoPylot.analysis,
    CoPylot.pyssembly_parser,
    CoPylot.pyssembly_interpreter

Test test
  Command: $test
